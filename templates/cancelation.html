{% extends "base.html" %}

{% block content %}

<h2>Meine Buchungen</h2>

{% if message %}
  <div class="alert alert-info">{{ message }}</div>
{% endif %}

<table style="width:100%; border-collapse: collapse; margin-top: 1rem;">
  <thead>
    <tr>
      <th style="border: 1px solid #ccc; padding: 0.5rem;">Zimmer</th>
      <th style="border: 1px solid #ccc; padding: 0.5rem;">Startdatum</th>
      <th style="border: 1px solid #ccc; padding: 0.5rem;">Enddatum</th>
      <th style="border: 1px solid #ccc; padding: 0.5rem;">Aktion</th>
    </tr>
  </thead>
  <tbody>
    {% for b in bookings %}
      <tr>
        <td style="border: 1px solid #ccc; padding: 0.5rem;">{{ b.zimmernummer }}</td>
        <td style="border: 1px solid #ccc; padding: 0.5rem;">{{ b.startdatum }}</td>
        <td style="border: 1px solid #ccc; padding: 0.5rem;">{{ b.enddatum }}</td>
        <td style="border: 1px solid #ccc; padding: 0.5rem;">
          {% if b.startdatum >= today %}
            <form method="POST">
              <input type="hidden" name="booking_id" value="{{ b.buchung_id }}">
              <button type="submit" class="btn btn-danger">Stornieren</button>
            </form>
          {% else %}
            <button class="btn btn-secondary" disabled>Nicht m√∂glich</button>
          {% endif %}
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="4" style="text-align:center; padding: 0.5rem;">Keine Buchungen vorhanden.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
